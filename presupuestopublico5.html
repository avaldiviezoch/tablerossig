<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Imágenes multitemporales — Swipe tipo Esri</title>

<!-- Fuente institucional -->
<link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@600;700;800;900&display=swap" rel="stylesheet"/>

<style>
  :root{
    --bg:#f4f6f9;
    --card:#ffffff;
    --ink:#0b2532;
    --muted:#475569;
    --line:#e5e7eb;
    --brand:#1e6eb6;   /* azul institucional */
    --accent:#e50914;  /* rojo subrayado */
  }

  html,body{
    margin:0;
    background:var(--bg);
    color:var(--ink);
    font-family:"Nunito Sans", system-ui, -apple-system, Segoe UI, Roboto, Arial;
  }

  .wrap{
    max-width:1200px;
    margin:clamp(16px,3vw,28px) auto;
    background:var(--card);
    border:1px solid var(--line);
    border-radius:20px;
    padding:clamp(16px,3vw,28px);
    box-shadow:0 18px 40px rgba(2,6,23,.08);
  }

  /* ======= Encabezado ======= */
  .title{
    text-align:center;
    font-weight:900;
    color:var(--brand);
    font-size:clamp(22px,3.6vw,34px);
    line-height:1.15;
    margin:0 0 8px 0;
    position:relative;
    display:inline-block;      /* para subrayado del ancho del texto */
  }
  .title-underline{
    position:relative;
    height:4px;
    background:transparent;
    overflow:hidden;
    margin:8px auto 0;
  }
  .title-underline::before{
    content:"";
    display:block;
    height:4px;
    width:0%;
    background:var(--accent);
    border-radius:999px;
    box-shadow:0 0 0 1px rgba(0,0,0,.06) inset;
    transform-origin:left center;
  }
  /* al entrar a vista */
  .animate .title-underline::before{
    animation:underline 700ms ease-out forwards;
  }
  @keyframes underline{
    from{ width:0%; } to{ width:100%; }
  }

  .intro{
    max-width:940px;
    margin:8px auto 18px;
    text-align:center;
    color:var(--muted);
    font-weight:700;
    line-height:1.45;
    font-size:clamp(13px,1.6vw,16px);
  }

  /* ======= Swipe tipo Esri (superposición) ======= */
  .swipe-block{ margin:26px auto 18px; }
  .swipe{
    position:relative;
    width:100%;
    height:min(66vh,620px);
    border:1px solid var(--line);
    border-radius:14px;
    overflow:hidden;
    background:#000;
    user-select:none;
    touch-action:none;
    --pos:50%;
  }
  .swipe img{
    position:absolute; inset:0; width:100%; height:100%;
    object-fit:cover; object-position:center;
    display:block;
  }
  .swipe .top{
    clip-path: inset(0 calc(100% - var(--pos)) 0 0);
    will-change: clip-path;
  }
  .divider{
    position:absolute; inset:0 0 0 auto; left:var(--pos);
    transform:translateX(-50%);
    z-index:3; pointer-events:none;
  }
  .divider::before{
    content:""; position:absolute; top:0; bottom:0; left:50%;
    width:2px; background:#ffffffcc; outline:1px solid rgba(0,0,0,.18);
  }
  .knob{
    position:absolute; top:50%; left:50%;
    transform:translate(-50%,-50%);
    width:46px; height:46px; border-radius:50%;
    background:#fff; border:2px solid #fff; outline:2px solid rgba(0,0,0,.18);
    display:grid; place-items:center; box-shadow:0 8px 18px rgba(0,0,0,.18);
  }
  .knob svg{ width:22px; height:22px; fill:var(--brand) }

  .hit{
    position:absolute; inset:0;
    cursor:ew-resize; z-index:4; background:transparent;
  }

  /* ======= Descripción / pie ======= */
  .caption{
    display:grid;
    grid-template-columns: 1fr auto;
    gap:12px;
    align-items:center;
    margin-top:10px;
  }
  .cap-title{
    margin:0;
    font-weight:900;
    font-size:clamp(14px,2vw,18px);
    line-height:1.35;
  }
  .meta{
    color:var(--brand);
    font-weight:900;
    font-size:clamp(12px,1.7vw,14px);
  }
  .year{
    margin-top:4px;
    color:#6b7280;
    font-weight:700;
    font-size:12px;
  }
  .cui{
    justify-self:end;
    background:var(--brand);
    color:#fff;
    border:0;
    padding:8px 12px;
    border-radius:999px;
    font-weight:900;
    font-size:13px;
    letter-spacing:.2px;
    box-shadow:0 6px 14px rgba(30,110,182,.28);
  }

  /* Responsivo */
  @media (max-width:720px){
    .swipe{ height:min(58vh,520px) }
    .caption{ grid-template-columns: 1fr; gap:8px; }
    .cui{ justify-self:start; }
  }
</style>
</head>
<body>
  <section class="wrap" id="section">
    <div style="text-align:center">
      <h1 class="title">Imágenes multitemporales</h1>
      <div class="title-underline" aria-hidden="true" style="width:280px"></div>
    </div>
    <p class="intro">
      Visualiza el antes y después de las intervenciones del ministerio y conoce el impacto tangible en el territorio.
      Esta herramienta permite monitorear visualmente el avance de las obras y apoyar la toma de decisiones basada en evidencia.
    </p>

    <!-- ========= COMPARADOR 1 ========= -->
    <div class="swipe-block">
      <div class="swipe" data-start="50" aria-label="Swipe 1 — Antes/Después">
        <!-- Abajo -->
        <img class="bottom" src="https://lh3.googleusercontent.com/d/1CG38GplqcLrceuh0PejAkqp5uUvGaCy5=w1000" alt="Antes — base">
        <!-- Arriba -->
        <img class="top" src="https://lh3.googleusercontent.com/d/1PokQrkV-y98cDZyFBD-vcn9Y52fanDwa=w1000" alt="Después — superior">

        <div class="divider" aria-hidden="true">
          <div class="knob" title="Arrastra para comparar">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M8.5 12l4-4-1.4-1.4L6 11.7l5.1 5.1L12.5 15l-4-4zM15.5 12l-4 4 1.4 1.4L18 12.3l-5.1-5.1L11.5 9l4 4z"/>
            </svg>
          </div>
        </div>
        <button class="hit" aria-label="Arrastra para mover el divisor"></button>
      </div>

      <div class="caption">
        <div>
          <p class="cap-title">
            CUI 2256322 — INSTALACION DE LOS SERVICIOS DE AGUA POTABLE Y ALCANTARILLADO SANITARIO EN LA NUEVA CIUDAD DE OLMOS,
            DISTRITO DE OLMOS — PROVINCIA DE LAMBAYEQUE — REGIÓN LAMBAYEQUE
          </p>
          <div class="meta">Olmos | Lambayeque | Lambayeque</div>
          <div class="year">Imágenes año 2018 y 2025</div>
        </div>
        <span class="cui">CUI 2256322</span>
      </div>
    </div>

    <!-- ========= COMPARADOR 2 ========= -->
    <div class="swipe-block">
      <div class="swipe" data-start="50" aria-label="Swipe 2 — Antes/Después">
        <!-- Abajo -->
        <img class="bottom" src="https://lh3.googleusercontent.com/d/1jnAuQ1jPjfEgEVCUSjpfvlWLCHl1rPbg=w1000" alt="Antes — base">
        <!-- Arriba -->
        <img class="top" src="https://lh3.googleusercontent.com/d/1QsL3PnQTQ1elA4i2SRkf0nG297zAFsXe=w1000" alt="Después — superior">

        <div class="divider" aria-hidden="true">
          <div class="knob" title="Arrastra para comparar">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M8.5 12l4-4-1.4-1.4L6 11.7l5.1 5.1L12.5 15l-4-4zM15.5 12l-4 4 1.4 1.4L18 12.3l-5.1-5.1L11.5 9l4 4z"/>
            </svg>
          </div>
        </div>
        <button class="hit" aria-label="Arrastra para mover el divisor"></button>
      </div>

      <div class="caption">
        <div>
          <p class="cap-title">
            CUI 2266697 — INSTALACION DE LOS SERVICIOS DE VIALIDAD URBANA PARA LA NUEVA CIUDAD DE OLMOS,
            DISTRITO DE OLMOS, PROVINCIA DE LAMBAYEQUE — DEPARTAMENTO LAMBAYEQUE
          </p>
          <div class="meta">Olmos | Lambayeque | Lambayeque</div>
          <div class="year">Imágenes año 2018 y 2025</div>
        </div>
        <span class="cui">CUI 2266697</span>
      </div>
    </div>
  </section>

<script>
/* ===== Subrayado animado al entrar en vista ===== */
(function(){
  const section = document.getElementById('section');
  const observer = new IntersectionObserver((entries)=>{
    for(const e of entries){
      if(e.isIntersecting){
        section.classList.add('animate');
        observer.disconnect();
        break;
      }
    }
  }, {threshold:.4});
  observer.observe(section);
})();

/* ===== Swipe: superposición sin cambiar tamaño (tipo Esri) ===== */
(function(){
  function setupSwipe(el){
    const start = Number(el.getAttribute('data-start') || 50);
    setPos(start);

    function setPos(pct){
      pct = Math.max(0, Math.min(100, pct));
      el.style.setProperty('--pos', pct + '%');
    }
    function pctFromEvent(e){
      const r = el.getBoundingClientRect();
      const x = (e.clientX ?? (e.touches && e.touches[0].clientX) ?? r.left);
      return ((x - r.left) / r.width) * 100;
    }

    let dragging=false;
    const down=(e)=>{ dragging=true; setPos(pctFromEvent(e)); e.preventDefault(); };
    const move=(e)=>{ if(dragging) setPos(pctFromEvent(e)); };
    const up=()=> dragging=false;

    const hit=el.querySelector('.hit');
    hit.addEventListener('pointerdown', down);
    window.addEventListener('pointermove', move);
    window.addEventListener('pointerup', up);

    hit.addEventListener('touchstart', down, {passive:false});
    window.addEventListener('touchmove', move, {passive:false});
    window.addEventListener('touchend', up);

    // Accesible por teclado
    hit.setAttribute('tabindex','0');
    hit.addEventListener('keydown', (e)=>{
      const step = e.shiftKey ? 5 : 1;
      const css = getComputedStyle(el).getPropertyValue('--pos');
      let cur = Number(css.replace('%','')) || 50;
      if(e.key === 'ArrowLeft')  setPos(cur - step);
      if(e.key === 'ArrowRight') setPos(cur + step);
    });
  }
  document.querySelectorAll('.swipe').forEach(setupSwipe);
})();
</script>
</body>
</html>
